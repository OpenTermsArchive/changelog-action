"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseComparator = void 0;
// Copyright 2018-2023 the Deno authors. All rights reserved. MIT license.
const parse_js_1 = require("./parse.js");
const _shared_js_1 = require("./_shared.js");
const comparator_max_js_1 = require("./comparator_max.js");
const comparator_min_js_1 = require("./comparator_min.js");
const constants_js_1 = require("./constants.js");
/**
 * Parses a comparator string into a valid SemVerComparator.
 * @param comparator
 * @returns A valid SemVerComparator
 */
function parseComparator(comparator) {
    const r = _shared_js_1.re[_shared_js_1.COMPARATOR];
    const m = comparator.match(r);
    if (!m) {
        return constants_js_1.NONE;
    }
    const operator = (m[1] ?? "");
    const semver = m[2] ? (0, parse_js_1.parse)(m[2]) : constants_js_1.ANY;
    const min = (0, comparator_min_js_1.comparatorMin)(semver, operator);
    const max = (0, comparator_max_js_1.comparatorMax)(semver, operator);
    return {
        operator,
        semver,
        min,
        max,
    };
}
exports.parseComparator = parseComparator;
