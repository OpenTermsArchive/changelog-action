"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rangeIntersects = void 0;
// Copyright 2018-2023 the Deno authors. All rights reserved. MIT license.
const comparator_intersects_js_1 = require("./comparator_intersects.js");
function rangesSatisfiable(ranges) {
    return ranges.every((r) => {
        // For each OR at least one AND must be satisfiable
        return r.ranges.some((comparators) => comparatorsSatisfiable(comparators));
    });
}
function comparatorsSatisfiable(comparators) {
    // Comparators are satisfiable if they all intersect with each other
    for (let i = 0; i < comparators.length - 1; i++) {
        const c0 = comparators[i];
        for (const c1 of comparators.slice(i + 1)) {
            if (!(0, comparator_intersects_js_1.comparatorIntersects)(c0, c1)) {
                return false;
            }
        }
    }
    return true;
}
/**
 * The ranges intersect every range of AND comparators intersects with a least one range of OR ranges.
 * @param r0 range 0
 * @param r1 range 1
 * @returns returns true if any
 */
function rangeIntersects(r0, r1) {
    return rangesSatisfiable([r0, r1]) && r0.ranges.some((r00) => {
        return r1.ranges.some((r11) => {
            return r00.every((c0) => {
                return r11.every((c1) => (0, comparator_intersects_js_1.comparatorIntersects)(c0, c1));
            });
        });
    });
}
exports.rangeIntersects = rangeIntersects;
